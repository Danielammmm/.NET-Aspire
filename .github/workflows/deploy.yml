name: Simular Deploy

on:
  workflow_dispatch:
  push:
    branches:
      - main

jobs:
  simulate-deploy:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¦ Clonar repositorio
      uses: actions/checkout@v3

    - name: ğŸ§± Instalar .NET 9
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: '9.0.100-preview.2'

    - name: ğŸ”§ Restaurar dependencias
      run: dotnet restore

    - name: ğŸ—ï¸ Compilar soluciÃ³n
      run: dotnet build --no-restore

    - name: ğŸš€ Intentar publicar OrdersService
      run: |
        echo "Intentando simular un despliegue..."
        if dotnet publish OrdersService/OrdersService.csproj -c Release -o ./publish; then
          echo "âœ”ï¸ Se podrÃ­a hacer deploy: publicaciÃ³n exitosa âœ…"
        else
          echo "âŒ No se puede hacer deploy: fallÃ³ la publicaciÃ³n âŒ"
          exit 1
        fi
